<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="theme-color" content="#000000">
    <!--
      manifest.json provides metadata used when your web app is added to the
      homescreen on Android. See https://developers.google.com/web/fundamentals/engage-and-retain/web-app-manifest/
    -->
    <link rel="manifest" href="%PUBLIC_URL%/manifest.json">
    <link rel="shortcut icon" href="%PUBLIC_URL%/favicon.ico">
    <title>Overworld</title>
  </head>
  <body>
    <noscript>
      You need to enable JavaScript to run this app.
    </noscript>

    <canvas id="game" width="240" height="160" class="big"/>
    
    <div id="loading" data-percent="0" />
    
    <div style="display:none">
      <audio id="intro" class="resource" src="sound/music/intro.mp3" loop preload="auto"></audio>
      <audio id="overworld" class="resource" src="sound/music/overworld.mp3" loop preload="auto"></audio>
      <audio id="gameover" class="resource" src="sound/music/gameover.mp3" loop preload="auto"></audio>

      <audio id="sword" class="resource" src="sound/sword.wav" preload="auto"></audio>
      <audio id="bush" class="resource" src="sound/bush.wav" preload="auto"></audio>

      <img id="grass_0" src="images/map/grass_0.png" class="resource">
      <img id="grass_1" src="images/map/grass_1.png" class="resource">
      <img id="bush_0" src="images/map/bush_0.png" class="resource">
      <img id="bush_1" src="images/map/bush_1.png" class="resource">
      <img id="tiles" src="images/map/tiles.png" class="resource">
      <img id="rock" src="images/map/rock.png" class="resource">

      <img id="leaf_0" src="images/map/leaf_0.png" class="resource">
      <img id="leaf_1" src="images/map/leaf_1.png" class="resource">
      <img id="leaf_2" src="images/map/leaf_2.png" class="resource">


      <img id="player_down_0" src="images/player/down_0.png" class="resource">
      <img id="player_down_1" src="images/player/down_1.png" class="resource">
      <img id="player_down_2" src="images/player/down_2.png" class="resource">
      <img id="player_down_3" src="images/player/down_3.png" class="resource">
      <img id="player_down_4" src="images/player/down_4.png" class="resource">
      <img id="player_down_5" src="images/player/down_5.png" class="resource">
      <img id="player_down_6" src="images/player/down_6.png" class="resource">
      <img id="player_down_7" src="images/player/down_7.png" class="resource">

      <img id="sword_down_0" src="images/player/sword_down_0.png" data-x="-3" class="resource">
      <img id="sword_down_1" src="images/player/sword_down_1.png" data-x="-3" class="resource">
      <img id="sword_down_2" src="images/player/sword_down_2.png" data-x="-3" class="resource">
      <img id="sword_down_3" src="images/player/sword_down_3.png" data-x="-3" class="resource">
      <img id="sword_down_4" src="images/player/sword_down_4.png" data-x="-3" class="resource">
      <img id="sword_down_5" src="images/player/sword_down_5.png" data-x="-3" class="resource">


      <img id="player_up_0" src="images/player/up_0.png" class="resource">
      <img id="player_up_1" src="images/player/up_1.png" class="resource">
      <img id="player_up_2" src="images/player/up_2.png" class="resource">
      <img id="player_up_3" src="images/player/up_3.png" class="resource">
      <img id="player_up_4" src="images/player/up_4.png" class="resource">
      <img id="player_up_5" src="images/player/up_5.png" class="resource">
      <img id="player_up_6" src="images/player/up_6.png" class="resource">
      <img id="player_up_7" src="images/player/up_7.png" class="resource">

      <img id="sword_up_0" src="images/player/sword_up_0.png" data-x="0" data-y="-12" class="resource">
      <img id="sword_up_1" src="images/player/sword_up_1.png" data-x="0" data-y="-12" class="resource">
      <img id="sword_up_2" src="images/player/sword_up_2.png" data-x="-2" data-y="-12" class="resource">
      <img id="sword_up_3" src="images/player/sword_up_3.png" data-x="-2" data-y="-12" class="resource">
      <img id="sword_up_4" src="images/player/sword_up_4.png" data-x="-5" data-y="-12" class="resource">
      <img id="sword_up_5" src="images/player/sword_up_5.png" data-x="-7" data-y="-12" class="resource">
      

      <img id="player_left_0" src="images/player/left_0.png" class="resource">
      <img id="player_left_1" src="images/player/left_1.png" class="resource">
      <img id="player_left_2" src="images/player/left_2.png" class="resource">
      <img id="player_left_3" src="images/player/left_3.png" class="resource">
      <img id="player_left_4" src="images/player/left_4.png" class="resource">
      <img id="player_left_5" src="images/player/left_5.png" class="resource">
      <img id="player_left_6" src="images/player/left_6.png" class="resource">
      <img id="player_left_7" src="images/player/left_7.png" class="resource">

      <img id="sword_left_0" src="images/player/sword_left_0.png" data-x="0" data-y="1" class="resource">
      <img id="sword_left_1" src="images/player/sword_left_1.png" data-x="-4" data-y="-1" class="resource">
      <img id="sword_left_2" src="images/player/sword_left_2.png" data-x="-8" data-y="-1" class="resource">
      <img id="sword_left_3" src="images/player/sword_left_3.png" data-x="-16" data-y="2" class="resource">
      <img id="sword_left_4" src="images/player/sword_left_4.png" data-x="-12" data-y="1" class="resource">
      <img id="sword_left_5" src="images/player/sword_left_5.png" data-x="-4" data-y="4" class="resource">
      

      <img id="player_right_0" src="images/player/right_0.png" class="resource">
      <img id="player_right_1" src="images/player/right_1.png" class="resource">
      <img id="player_right_2" src="images/player/right_2.png" class="resource">
      <img id="player_right_3" src="images/player/right_3.png" class="resource">
      <img id="player_right_4" src="images/player/right_4.png" class="resource">
      <img id="player_right_5" src="images/player/right_5.png" class="resource">
      <img id="player_right_6" src="images/player/right_6.png" class="resource">
      <img id="player_right_7" src="images/player/right_7.png" class="resource">

      <img id="sword_right_0" src="images/player/sword_right_0.png" data-x="0" data-y="1" class="resource">
      <img id="sword_right_1" src="images/player/sword_right_1.png" data-x="0" data-y="-1" class="resource">
      <img id="sword_right_2" src="images/player/sword_right_2.png" data-x="4" data-y="-1" class="resource">
      <img id="sword_right_3" src="images/player/sword_right_3.png" data-x="3" data-y="2" class="resource">
      <img id="sword_right_4" src="images/player/sword_right_4.png" data-x="0" data-y="1" class="resource">
      <img id="sword_right_5" src="images/player/sword_right_5.png" data-x="1" data-y="4" class="resource">
      

    </div>
    <script>
      let resources = ['webfonts']
          loaded = [];

      WebFontConfig = {
        google: {
            families: ['Press Start 2P']
        },
        active: () => loadedResource('webfonts')
      };
      (function(d) {
        var wf = d.createElement('script'), s = d.scripts[0];
        wf.src = 'webfont.js'; // https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js
        wf.async = true;
        s.parentNode.insertBefore(wf, s);
      })(document);

      let loadedResource = (resource) => {
        loaded.push(resource);
        document.getElementById("loading").dataset.percent = loaded.length / resources.length;
      };

      for (let resource of document.getElementsByClassName('resource')) {
        resources.push(resource.id);
        let tag = resource.tagName.toLowerCase();
        let event = tag === 'img' ? 'load' : 'canplay';
        resource.addEventListener(event, () => loadedResource(resource.id));
      }
    </script>
  </body>
</html>
